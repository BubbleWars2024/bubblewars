type ReferralProgram @entity(immutable: true) {
    id: Bytes!
    deployer: Bytes!
    hooks: [Bytes!]!
    referralTotals: [ReferralTotal!]! @derivedFrom(field: "referralProgram")
    referrals: [Referral!]! @derivedFrom(field: "referralProgram")
}

type ReferralTotal @entity {
    id: Bytes!
    total: BigInt!
    referralProgram: ReferralProgram!
}

type Referral @entity(immutable: true) {
    id: Bytes!
    account: Bytes!
    referral: Bytes!
    referralProgram: ReferralProgram!
}